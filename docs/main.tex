% lualatex
\documentclass[twoside,a5paper,10pt]{book}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}

\usepackage{fontspec}
\setmainfont{Noto Serif}
%\setmainfont{Noto Sans Mono}
\setsansfont{Noto Sans}
\setmonofont{Noto Sans Mono}

\usepackage[
    twoside, 
    includehead, 
    margin=10mm, 
    % left=25mm, 
    bottom=15mm,
    headsep=2mm
]{geometry}
\usepackage{indentfirst}
\usepackage{lastpage}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{tabularx}
\usepackage{subfiles}
%\usepackage{amsmath}
%\usepackage{multicol}

\usepackage{enumitem}
\setlist{nosep}

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE,LO]{\fontsize{10}{12}\rightmark}

\usepackage{titlesec}
% \titleformat{\chapter}[display]{\normalfont\huge\bfseries}{}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{-40pt}{15pt}
% \titlespacing*{\section}{0pt}{12pt}{12pt}    % l t b
% \titlespacing*{\subsection}{0pt}{6pt}{6pt}
\titleformat{\chapter}[block]{\centering\fontsize{10pt}{16pt}\selectfont\bf}{}{12pt}{}
\titleformat{\section}[block]{\centering\fontsize{10pt}{16pt}\selectfont\bf}{}{12pt}{}

\RequirePackage{caption}
\DeclareCaptionLabelSeparator{dash}{ --- }
\captionsetup{justification=centering,labelsep=dash}

% https://tex.stackexchange.com/questions/23921/how-to-shorten-shrink-spaces-between-words
\fontdimen3\font=3pt
\hfuzz=5pt

\usepackage{listings}
\lstset{
    basicstyle=\small,
    numbers=left,
    language=C++,
    frame=single,
    showstringspaces=false,
    breaklines=true,
    breakatwhitespace=false,
    stringstyle=\ttfamily,
    % mathescape=true,
    commentstyle=\color{red},
    keepspaces=true,
}

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    citecolor=red,
    bookmarks=true,
    pdftitle={Методические указания к выполнению лабораторных работ по дисциплине «Программирование на C++» для очной формы обучения},
    pdfauthor={Ермаков А.В., Сучкова Л.И.},
}

% \directlua{require("drawboxes")}
% \AtBeginShipout{\directlua{drawboxes.visual_debug()}}

\begin{document}

\subfile{00-page1}
\subfile{00-page2}
% \newpage
\tableofcontents
\subfile{00}

\subfile{01}
\subfile{02}
%\subfile{03}
\subfile{99-ref}

\appendix
\subfile{app02}

\end{document}
